# Домашнее задание к занятию 17 «Инцидент-менеджмент»

## Основная часть

Составьте постмортем на основе реального сбоя системы GitHub в 2018 году.

Информация о сбое: 

* [в виде краткой выжимки на русском языке](https://habr.com/ru/post/427301/);
* [развёрнуто на английском языке](https://github.blog/2018-10-30-oct21-post-incident-analysis/).


<table>
	<tr>
	    <th>Имя</th>
	    <th>Описание</th>
	</tr >
	<tr >
	    <td>
          Краткое описание инцидента
      </td>
	    <td>
          Отображению устаревшей и противоречивой информации, а также в большинстве случаев  обслуживать события веб-хуков или создавать и публиковать сайты GitHub Pages начиная с 2018 21 октября 22:52 UTC, длительностью 24 часа 11 минут. Пользовательские данные при этом не были потеряны.
      </td>
	</tr>
	<tr>
	    <td>
          События предшествующие инциденту
      </td>
	    <td>
          Проведение регламентных работ по замене вышедшего из строя оптического оборудования 100G
      </td>
	</tr>
  	<tr >
	    <td>
          Причина инцидента
      </td>
	    <td>
          Потеря связности между сетевым концентратором на восточном побережье США и основным ЦОДом на восточном побережье США. Связь между этими узлами была восстановлена спустя 43 секунды, но этот кратковременный сбой вызвал цепочку событий, которые привели к ухудшению качества обслуживания на 24 часа 11 минут.
      </td>
	</tr>
	<tr>
	    <td>
          Воздействие
      </td>
	    <td>
        Мы приняли явное решение частично ухудшить удобство использования сайта, приостановив доставку webhook и сборку GitHub Pages вместо того, чтобы подвергать опасности данные, которые мы уже получили от пользователей. Другими словами, наша стратегия заключалась в том, чтобы уделять приоритетное внимание целостности данных, а не удобству использования сайта и времени на восстановление
     </td>
 	<tr>
	    <td>
          Обнаружение
      </td>
	    <td>
         21 октября 2018 в 23:19 UTC внутренние системы мониторинга начали генерировать предупреждения, указывающие на многочисленные сбои в системах. В это время несколько инженеров отвечали и работали над сортировкой входящих уведомлений.  23:02 UTC инженеры группы быстрого реагирования определили, что топологии многочисленных кластеров баз данных находятся в непредвиденном состоянии.
     </td>
	</tr>
 	<tr>
	    <td>
          Реакция
      </td>
	    <td>
          Был устранен инженерами группы быстрого реагирования, координатором инцидента и доп. разработчиками инженерной группы БД. Пользователи были оповещены через твиттер и блог GitHub.
      </td>
	</tr>
 	<tr>
	    <td>
          Восстановление
      </td>
	    <td>
           Поскольку приоритет отдавался целостности данных, то общее время восстановления составила 24 часа 11 минут.
      </td>
	</tr>
 	<tr>
	    <td>
          Таймлайн
      </td>
	    <td>
          <p>
              <strong>21 октября 2018, 22:52 UTC</strong> - Центр обработки данных на западном побережье США и узлы Orchestrator общедоступного облака на восточном побережье США смогли установить кворум и начать аварийное переключение кластеров для направления операций записи в центр обработки данных на западном побережье США. Серверы баз данных в центре обработки данных на восточном побережье США содержали короткий период записи, который не был реплицирован на объект на западном побережье США. Поскольку кластеры баз данных в обоих центрах обработки данных теперь содержали записи, которых не было в другом центре обработки данных, не получилось безопасно выполнить возврат основного сервера в центр обработки данных на восточном побережье США.
          </p>
          <p>
              <strong>21 октября 2018, 22:54 UTC</strong> - Внутренние системы мониторинга начали генерировать предупреждения, указывающие на многочисленные сбои в наших системах. В это время несколько инженеров отвечали и работали над сортировкой входящих уведомлений.
          </p>
          <p>
              <strong>21 октября 2018, 23:07 UTC</strong> - Для предотвращения внесения дополнительных изменений в БД группа реагирования вручную заблокировала внутренние средства развёртывания.
          </p>
          <p>
              <strong>21 октября 2018 23:09 UTC</strong> Сайту присваивается жёлтый статус работоспособности группой реагирования.
          </p>
          <p>
              <strong>21 октября 2018, 23:11 UTC</strong> - Решение изменить статус сайта на красный координатором работы.
          </p>
          <p>
              <strong>21 октября 2018, 23:13 UTC</strong> - Были привлечены дополнительные инженеры из группы разработки баз данных GitHub. Они начали исследовать текущее состояние, чтобы определить, какие действия необходимо предпринять, чтобы вручную настроить базу данных Восточного побережья США в качестве основной для каждого кластера и перестроить топологию репликации.
          </p>
          <p>
              <strong>21 октября 2018, 23:19 UTC</strong> - В целях сохранности данных принято решение об остановке выполнения заданий, которые пишут метаданные типа push
          </p>
          <p>
              <strong>22 октября 2018, 00:05 UTC</strong> - Инженеры, участвующие в группе реагирования, начали разработку плана по устранению несоответствий данных и внедрению наших процедур аварийного переключения для MySQL.
          </p>
          <p>
              <strong>22 октября 2018, 00:41 UTC</strong> - Инициирован процесс резервного копирования для всех затронутых кластеров MySQL. Одновременно с этим несколько групп инженеров искали способы ускорить передачу и время восстановления без дальнейшего ухудшения удобства использования сайта или риска повреждения данных.
          </p>
          <p>
              <strong>22 октября 2018, 06:51 UTC</strong> - Несколько кластеров завершили восстановление из резервных копий в нашем центре обработки данных на восточном побережье США и начали репликацию новых данных с западного побережья США.
          </p>
          <p>
              <strong>22 октября 2018, 07:46 UTC</strong> - Публикация информационного сообщения об инциденте в блоге.
          </p>
          <p>
              <strong>22 октября 2018, 11:12 UTC</strong> - Завершен процесс восстановления первоначального состояния всех БД на восточном побережье.
          </p>
          <p>
              <strong>22 октября 2018, 13:15 UTC</strong> - Задержки репликации увеличиваются, а не уменьшаются в направлении согласованного состояния. Мы начали предоставлять дополнительные реплики чтения MySQL
          </p>
          <p>
              <strong>22 октября 2018, 16:24 UTC</strong> - Завершена синхронизация реплик - возврат к исходной топологии.
          </p>
          <p>
              <strong>22 октября 2018, 16:45 UTC</strong> - Обработка очереди накопившихся событий.
          </p>
          <p>
              <strong>22 октября 2018, 23:03 UTC</strong> - Все ожидающие сборки вебхуков и страниц были обработаны, и была подтверждена целостность и правильная работа всех систем. Статус сайта обновлен до зеленого.
          </p>
</td>
	</tr>
 	<tr>
	    <td>
          Последующие действия
      </td>
	    <td>
        	<p>
              1.Предложено перенастройка конфигурацию Orchestrator, чтобы предотвратить продвижение основных баз данных через региональные границы. Выборы лидеров в регионе, как правило, безопасны, но внезапная задержка между странами стала основным фактором, способствовавшим этому инциденту.
          </p>
        	<p>
              2.Произведено ускорение перехода на новый механизм отчетов о состоянии. Поскольку текущий механизм с тремя статусами не дает вам точного представления о том, что работает, а что нет, и в будущем будет отображаться различные компоненты платформы, чтобы вы знали статус каждой службы.
          </p>
        	<p>
              3. За несколько недель до этого инцидента началось внедрение инициативы по поддержке обслуживания трафика GitHub из нескольких центров обработки данных в схеме active/active/active. Целью этого проекта является поддержка резервирования N+1 на уровне объекта.
          </p>
        	<p>
              4.Внедрение системной практики проверки сценариев сбоев, прежде чем они смогут повлиять на пользователей GitHub.
          </p>
      </td>
	</tr>
</table>
---

### Как оформить решение задания

Выполненное домашнее задание пришлите в виде ссылки на .md-файл в вашем репозитории.

---
