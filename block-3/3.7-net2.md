# Домашнее задание к занятию "3.7. Компьютерные сети.Лекция 2"

## Задание

1. Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?

linux 
ip link show
ifconfig -a

windows 
ipconfig /all

2. Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?

протокол LLDP
пакет lldpd
команда sudo lldpctl

3. Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.

технология VLAN
пакет в ubuntu - sudo apt install vlan


4. Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.

Bonding – это объединение сетевых интерфейсов по определенному типу агрегации, Служит для увеличения пропускной способности и/или отказоустойчивость сети.

Типы агрегации интерфейсов в Linux:

Mode-0(balance-rr) – Данный режим используется по умолчанию. Balance-rr обеспечивается балансировку нагрузки и отказоустойчивость. В данном режиме сетевые пакеты отправляются “по кругу”, от первого интерфейса к последнему. Если выходят из строя интерфейсы, пакеты отправляются на остальные оставшиеся. Дополнительной настройки коммутатора не требуется при нахождении портов в одном коммутаторе. При разностных коммутаторах требуется дополнительная настройка.

Mode-1(active-backup) – Один из интерфейсов работает в активном режиме, остальные в ожидающем. При обнаружении проблемы на активном интерфейсе производится переключение на ожидающий интерфейс. Не требуется поддержки от коммутатора.

Mode-2(balance-xor) – Передача пакетов распределяется по типу входящего и исходящего трафика по формуле ((MAC src) XOR (MAC dest)) % число интерфейсов. Режим дает балансировку нагрузки и отказоустойчивость. Не требуется дополнительной настройки коммутатора/коммутаторов.

Mode-3(broadcast) – Происходит передача во все объединенные интерфейсы, тем самым обеспечивая отказоустойчивость. Рекомендуется только для использования MULTICAST трафика.

Mode-4(802.3ad) – динамическое объединение одинаковых портов. В данном режиме можно значительно увеличить пропускную способность входящего так и исходящего трафика. Для данного режима необходима поддержка и настройка коммутатора/коммутаторов.

Mode-5(balance-tlb) – Адаптивная балансировки нагрузки трафика. Входящий трафик получается только активным интерфейсом, исходящий распределяется в зависимости от текущей загрузки канала каждого интерфейса. Не требуется специальной поддержки и настройки коммутатора/коммутаторов.

Mode-6(balance-alb) – Адаптивная балансировка нагрузки. Отличается более совершенным алгоритмом балансировки нагрузки чем Mode-5). Обеспечивается балансировку нагрузки как исходящего так и входящего трафика. Не требуется специальной поддержки и настройки коммутатора/коммутаторов.

пример balance-alb

vi /etc/sysconfig/network-scripts/ifcfg-bond0
device=bond0
ipaddr=192.168.2.1
netmask=255.255.255.0
onboot=yes
bootproto=none
userctl=no

vi /etc/sysconfig/network-scripts/ifcfg-eth0
device=eth0
userctl=no
onboot=yes
master=bond0
slave=yes
bootproto=none

vi /etc/sysconfig/network-scripts/ifcfg-eth1
device=eth1
userctl=no
onboot=yes
master=bond0
slave=yes
bootproto=none

vi /etc/modprobe.conf
alias bond0 bonding
options bond0 mode=balance-alb miimon=100


5. Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.

Address:	10.10.10.0	00001010.00001010.00001010.00000   000
Netmask:	255.255.255.248 = 29	11111111.11111111.11111111.11111   000
Wildcard:	0.0.0.7	00000000.00000000.00000000.00000   111
Network:	10.10.10.0	00001010.00001010.00001010.00000   000	(Class A)
Broadcast:	10.10.10.7	00001010.00001010.00001010.00000   111
HostMin:	10.10.10.1	00001010.00001010.00001010.00000   001
HostMax:	10.10.10.6	00001010.00001010.00001010.00000   110
Hosts/Net:	6	( RFC-1918 Private Internet Address. )

получается для одной сети с 29 маской нужно 8 адресов
всего 256 адресов
256/8=32   ответ: 32 сети можно получить 
пример

10.10.10.8/29 (net 10.10.10.8 broadcast 10.10.10.15 host 10.10.10.9-10.10.10.14)
10.10.10.16/29 (net 10.10.10.16 broadcast 10.10.10.23 host 10.10.10.17-10.10.10.22)
10.10.10.24/29 (net 10.10.10.24 broadcast 10.10.10.32 host 10.10.10.25-10.10.10.31)

6. Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.

мы можем взять из сети 100.64.0.0/10

Netmask:   255.255.255.192 = 26 11111111.11111111.11111111.11 000000
Network:   100.64.0.0/26        01100100.01000000.00000000.00 000000
HostMin:   100.64.0.1           01100100.01000000.00000000.00 000001
HostMax:   100.64.0.62          01100100.01000000.00000000.00 111110
Broadcast: 100.64.0.63          01100100.01000000.00000000.00 111111
Hosts/Net: 62                    Class A

маска буlет /26 = 255.255.255.192

7. Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP?

windows 
проверить таблицу arp -a

удалить полностью arp -d
удалить ip arp -d <host>

linux
проверить таблицу
поставить sudo apt install net-tools
arp -a

удалить полностью arp -d -a
удалить ip arp -d <host>
